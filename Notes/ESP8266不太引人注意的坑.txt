ESP8266的STA-Client模式使用流程为：
设置STA模式 ->
	加入WiFi AP ->
		连接服务器socket ->
			进入发送数据模式

在提高系统的健壮性工作中，我设置了服务器宕机后，ESP8266发送超时，自动重启。

但这里存在一个很隐藏的坑：在服务器宕机后快速重启，ESP8266仍处于发送模式，但它却会和服务器自动建立连接，这时ESP8266再重启并建立连接，建立的是第二个与服务器的链接，而服务器端不使用多线程，只会服务第一个连接，而第一个连接又是死连接。这里并不能要求ESP8266识别自己是否已于服务器建立连接，由于网关、服务器节点和APP是一对一的关系，所以最好的解决方案是：

服务器使用多线程，主线程监听连接，子线程处理连接内的服务。维护一个连接池，当有新连接产生，就把连接池清空，加入新连接，维持连接池只有一个连接，以防止浪费负载资源。




另一个：手机热点需要将设备加入允许列表